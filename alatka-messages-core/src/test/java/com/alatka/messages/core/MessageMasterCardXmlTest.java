package com.alatka.messages.core;

import com.alatka.messages.core.definition.IsoXmlMessageDefinitionBuilder;
import com.alatka.messages.core.holder.MessageHolder;
import com.alatka.messages.core.message.MessageBuilder;
import com.alatka.messages.core.util.BytesUtil;
import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.BeforeAll;
import org.junit.jupiter.api.Test;

public class MessageMasterCardXmlTest {

    @BeforeAll
    public static void beforeAll() {
        new IsoXmlMessageDefinitionBuilder("messages").build();
    }

    private void doTest(String hex, String key) {
        MessageHolder holder = MessageBuilder.init(key).unpack(hex);
        System.out.println(holder);
        byte[] pack = MessageBuilder.init(key).pack(holder);
        Assertions.assertEquals(BytesUtil.bytesToHex(pack), hex.toUpperCase());

        MessageHolder holder1 = MessageBuilder.init(key).unpack(pack);
        Assertions.assertEquals(holder1, holder);
    }

    @Test
    public void test01() {
        String hex = "F0F1F0F0723C440180618008F1F6F5F5F0F6F9F0F0F1F4F0F1F0F0F3F0F5F0F0F0F0F0F0F0F0F0F0F0F0F0F1F2F3F4F5F0F9F0F4F1F1F3F7F2F3F0F4F3F5F1F7F1F1F3F7F2F3F0F9F0F4F2F5F0F3F5F3F1F1F8F1F0F0F6F0F1F3F0F5F8F0F6F0F1F3F0F5F8F1F2F3F4F5F6F7F8F9F1F1F1F1F1F1D1968895C39694978195A8404040404040404040404040D396958496954040404040404040E4E2C1F0F1F9D7F4F2F0F7F0F1F0F3F9F1F0F7F7F0F3D7F0F1F8F4F0F0F2F6F1F0F2F5F1F0F0F0F0F6F6F0F7F8F4F04040404040F0F3F4F0F0";
        doTest(hex, "iso:mc:common:payload");
    }

    @Test
    public void test02() {
        String hex = "F0F1F0F07EFF464128E1F20AF1F6F5F4F5F2F1F7F0F1F5F1F9F8F2F7F6F9F0F0F0F0F0F0F0F0F0F0F0F0F0F0F1F5F0F0F0F0F0F0F0F0F0F0F1F5F0F0F0F0F0F0F0F0F0F0F1F5F0F0F0F7F2F6F1F5F4F2F1F2F6F1F0F0F0F0F0F0F6F1F0F0F0F0F0F0F0F4F0F0F9F3F1F5F4F2F1F3F0F7F2F6F3F0F1F2F0F7F2F6F0F7F2F6F5F9F9F9F0F5F1F0F0F0F0F4F0F6F1F2F3F4F5F6F3F5F5F4F5F2F1F7F0F1F5F1F9F8F2F7F6F9C4F3F0F1F2F2F0F1F1F2F3F4F5F8F1F8F0F0F0F0F8F5F0F0F0F1F0F0F0F0F4F9F8F7F6F5F4F3F2F1F2F3F4F5F6F7F8F9F0F0F0F0F0F0C6C9D9E2E340E3C8C9D9C440C2C1D5D240404040404040E2E34B40D3D6E4C9E24040404040D4D640F0F0F1D9F8F4F0F8F4F0F8F4F09A7CC55D43A7D472F1F0F05F2A02084082025C00950500000400009A032307269C01009F02060000000015009F10141614250002044000DAC000000000000010E6E3459F1A0208409F2608C73EE69DF8E1BBE89F2701809F3303E0E8E89F34034201009F3602A61B9F370416216470F0F2F6F1F0F0F0F0F0F0F0F0F1F5F0F0F8F4F0F1F1F1F1F1F1F1F1F1F1F0F1F2D4C3C3F0F0F0F0F0F1F3F7F1";
        String key= "iso:mc:common:payload";
        MessageHolder holder = MessageBuilder.init(key).unpack(hex);
        System.out.println(holder);
    }

    @Test
    public void test03() {
        String hex = "F0F1F0F07EFF464128E1F20AF1F6F5F4F5F2F1F7F0F1F5F1F9F8F2F7F6F9F0F0F0F0F0F0F0F0F0F0F0F0F0F0F1F5F0F0F0F0F0F0F0F0F0F0F1F5F0F0F0F0F0F0F0F0F0F0F1F5F0F0F0F7F2F6F1F6F2F6F0F7F6F1F0F0F0F0F0F0F6F1F0F0F0F0F0F0F0F4F0F0F9F4F1F6F2F6F0F7F0F7F2F6F3F0F1F2F0F7F2F6F0F7F2F6F5F9F9F9F0F5F1F0F0F0F0F4F0F6F1F2F3F4F5F6F3F5F5F4F5F2F1F7F0F1F5F1F9F8F2F7F6F9C4F3F0F1F2F2F0F1F1F2F3F4F5F8F1F8F0F0F0F0F8F5F0F0F0F1F0F0F0F0F4F9F8F7F6F5F4F3F2F1F2F3F4F5F6F7F8F9F0F0F0F0F0F0C6C9D9E2E340E3C8C9D9C440C2C1D5D240404040404040E2E34B40D3D6E4C9E24040404040D4D640F0F0F1D9F8F4F0F8F4F0F8F4F09A7CC55D43A7D472F1F0F05F2A02084082025C00950500000400009A032307269C01009F02060000000015009F10141614250002044000DAC000000000000010E6E3459F1A0208409F260899CCA4B8592077129F2701809F3303E0E8E89F34034201009F3602A61C9F370440956336F0F2F6F1F0F0F0F0F0F0F0F0F1F5F0F0F8F4F0F1F1F1F1F1F1F1F1F1F1F0F1F2D4C3C3F0F0F0F0F0F1F3F7F3";
        String key= "iso:mc:common:payload";
        MessageHolder holder = MessageBuilder.init(key).unpack(hex);
        System.out.println(holder);
    }

    @Test
    public void test04() {
        String hex = "F0F1F1F07EE300010E81E202F1F6F5F4F5F2F1F7F0F1F5F1F9F8F2F7F6F9F0F0F0F0F0F0F0F0F0F0F0F0F0F0F1F5F0F0F0F0F0F0F0F0F0F0F1F5F0F0F0F0F0F0F0F0F0F0F1F5F0F0F0F7F2F6F1F5F4F2F1F2F6F1F0F0F0F0F0F0F6F1F0F0F0F0F0F0F0F4F0F0F9F3F0F7F2F6F0F7F2F6F0F6F1F2F3F4F5F6F0F8F5F0F0F0F1F0F0F0F0F4F8F6F2F8F6F6F0F0F9F8F7F6F5F4F3F2F0F0F1D9F8F4F0F8F4F0F8F4F0F0F1F2910AF630A0D10BD35C8C0010F0F1F2D4C3C3F0F0F0F0F0F1F3F7F1";
        doTest(hex, "iso:mc:common:payload");
    }

    @Test
    public void test05() {
        String hex = "F0F1F1F07EE300010E81E202F1F6F5F4F5F2F1F7F0F1F5F1F9F8F2F7F6F9F0F0F0F0F0F0F0F0F0F0F0F0F0F0F1F5F0F0F0F0F0F0F0F0F0F0F1F5F0F0F0F0F0F0F0F0F0F0F1F5F0F0F0F7F2F6F1F6F2F6F0F7F6F1F0F0F0F0F0F0F6F1F0F0F0F0F0F0F0F4F0F0F9F4F0F7F2F6F0F7F2F6F0F6F1F2F3F4F5F6F0F8F5F0F0F0F1F0F0F0F0F4F3F3F0F6F1F6F0F0F9F8F7F6F5F4F3F2F0F0F1D9F8F4F0F8F4F0F8F4F0F0F1F2910A56DF3E2FD96097B80010F0F1F2D4C3C3F0F0F0F0F0F1F3F7F3";
        doTest(hex, "iso:mc:common:payload");
    }

    @Test
    public void test06() {
        String hex = "F0F1F0F07EFF464128E1F20AF1F6F5F4F5F2F1F7F0F1F5F1F9F8F2F7F6F9F0F0F0F0F0F0F0F0F0F0F0F0F0F0F1F5F0F0F0F0F0F0F0F0F0F0F1F5F0F0F0F0F0F0F0F0F0F0F1F5F0F0F0F7F2F6F1F5F4F2F1F2F6F1F0F0F0F0F0F0F6F1F0F0F0F0F0F0F0F4F0F0F9F3F1F5F4F2F1F3F0F7F2F6F3F0F1F2F0F7F2F6F0F7F2F6F5F9F9F9F0F5F1F0F0F0F0F4F0F6F1F2F3F4F5F6F3F5F5F4F5F2F1F7F0F1F5F1F9F8F2F7F6F9C4F3F0F1F2F2F0F1F1F2F3F4F5F8F1F8F0F0F0F0F8F5F0F0F0F1F0F0F0F0F4F9F8F7F6F5F4F3F2F1F2F3F4F5F6F7F8F9F0F0F0F0F0F0C6C9D9E2E340E3C8C9D9C440C2C1D5D240404040404040E2E34B40D3D6E4C9E24040404040D4D640F0F0F1D9F8F4F0F8F4F0F8F4F09A7CC55D43A7D472F1F0F05F2A02084082025C00950500000400009A032307269C01009F02060000000015009F10141614250002044000DAC000000000000010E6E3459F1A0208409F2608C73EE69DF8E1BBE89F2701809F3303E0E8E89F34034201009F3602A61B9F370416216470F0F2F6F1F0F0F0F0F0F0F0F0F1F5F0F0F8F4F0F1F1F1F1F1F1F1F1F1F1F0F1F2D4C3C3F0F0F0F0F0F1F3F7F1";
        String key= "iso:mc:common:payload";
        MessageHolder holder = MessageBuilder.init(key).unpack(hex);
        System.out.println(holder);
    }

    @Test
    public void test07() {
        String hex = "F0F1F1F07EE300010E81E202F1F6F5F4F5F2F1F7F0F1F5F1F9F8F2F7F6F9F0F0F0F0F0F0F0F0F0F0F0F0F0F0F1F5F0F0F0F0F0F0F0F0F0F0F1F5F0F0F0F0F0F0F0F0F0F0F1F5F0F0F0F7F2F6F1F6F2F6F0F7F6F1F0F0F0F0F0F0F6F1F0F0F0F0F0F0F0F4F0F0F9F4F0F7F2F6F0F7F2F6F0F6F1F2F3F4F5F6F0F8F5F0F0F0F1F0F0F0F0F4F3F3F0F6F1F6F0F0F9F8F7F6F5F4F3F2F0F0F1D9F8F4F0F8F4F0F8F4F0F0F1F2910A56DF3E2FD96097B80010F0F1F2D4C3C3F0F0F0F0F0F1F3F7F3";
        doTest(hex, "iso:mc:common:payload");
    }

    @Test
    public void test08() {
        String hex = "F0F1F0F07EFF464128E1F20AF1F6F5F4F5F2F1F7F0F1F5F1F9F8F2F7F6F9F0F0F0F0F0F0F0F0F0F0F0F0F0F0F1F5F0F0F0F0F0F0F0F0F0F0F1F5F0F0F0F0F0F0F0F0F0F0F1F5F0F0F0F7F2F6F1F6F2F6F0F7F6F1F0F0F0F0F0F0F6F1F0F0F0F0F0F0F0F4F0F0F9F4F1F6F2F6F0F7F0F7F2F6F3F0F1F2F0F7F2F6F0F7F2F6F5F9F9F9F0F5F1F0F0F0F0F4F0F6F1F2F3F4F5F6F3F5F5F4F5F2F1F7F0F1F5F1F9F8F2F7F6F9C4F3F0F1F2F2F0F1F1F2F3F4F5F8F1F8F0F0F0F0F8F5F0F0F0F1F0F0F0F0F4F9F8F7F6F5F4F3F2F1F2F3F4F5F6F7F8F9F0F0F0F0F0F0C6C9D9E2E340E3C8C9D9C440C2C1D5D240404040404040E2E34B40D3D6E4C9E24040404040D4D640F0F0F1D9F8F4F0F8F4F0F8F4F09A7CC55D43A7D472F1F0F05F2A02084082025C00950500000400009A032307269C01009F02060000000015009F10141614250002044000DAC000000000000010E6E3459F1A0208409F260899CCA4B8592077129F2701809F3303E0E8E89F34034201009F3602A61C9F370440956336F0F2F6F1F0F0F0F0F0F0F0F0F1F5F0F0F8F4F0F1F1F1F1F1F1F1F1F1F1F0F1F2D4C3C3F0F0F0F0F0F1F3F7F3";
        String key= "iso:mc:common:payload";
        MessageHolder holder = MessageBuilder.init(key).unpack(hex);
        System.out.println(holder);
    }

    @Test
    public void test09() {
        String hex = "F0F1F1F07EE300010E81E202F1F6F5F4F5F2F1F7F0F1F5F1F9F8F2F7F6F9F0F0F0F0F0F0F0F0F0F0F0F0F0F0F1F5F0F0F0F0F0F0F0F0F0F0F1F5F0F0F0F0F0F0F0F0F0F0F1F5F0F0F0F7F2F6F1F5F4F2F1F2F6F1F0F0F0F0F0F0F6F1F0F0F0F0F0F0F0F4F0F0F9F3F0F7F2F6F0F7F2F6F0F6F1F2F3F4F5F6F0F8F5F0F0F0F1F0F0F0F0F4F8F6F2F8F6F6F0F0F9F8F7F6F5F4F3F2F0F0F1D9F8F4F0F8F4F0F8F4F0F0F1F2910AF630A0D10BD35C8C0010F0F1F2D4C3C3F0F0F0F0F0F1F3F7F1";
        doTest(hex, "iso:mc:common:payload");
    }
}
